# ä¾èµ–æ£€æŸ¥æŠ¥å‘Š

## ğŸ“¦ å½“å‰é¡¹ç›®ä¾èµ–

### æ ¸å¿ƒä¾èµ– (requirements)

ä» `pyproject.toml` ä¸­å®šä¹‰çš„ç”Ÿäº§ç¯å¢ƒä¾èµ–ï¼š

```toml
dependencies = [
    # æ•°æ®éªŒè¯å’Œè®¾ç½®
    "pydantic>=2.5.0",           # æ•°æ®éªŒè¯
    "pydantic-settings>=2.1.0",  # è®¾ç½®ç®¡ç†ï¼ˆä»ç¯å¢ƒå˜é‡åŠ è½½é…ç½®ï¼‰

    # æ•°æ®å¤„ç†
    "pandas>=2.0.0",             # æ•°æ®åˆ†æå’Œå¤„ç†
    "numpy>=1.24.0",             # æ•°å€¼è®¡ç®—

    # ç¯å¢ƒé…ç½®
    "python-dotenv>=1.0.0",      # åŠ è½½ .env æ–‡ä»¶
]
```

### å¼€å‘ä¾èµ– (dev)

```toml
dev = [
    # æµ‹è¯•
    "pytest==7.4.3",             # æµ‹è¯•æ¡†æ¶
    "pytest-asyncio==0.21.1",    # å¼‚æ­¥æµ‹è¯•æ”¯æŒ

    # ä»£ç è´¨é‡
    "black==23.11.0",            # ä»£ç æ ¼å¼åŒ–
    "isort==5.13.2",             # å¯¼å…¥æ’åº
    "flake8>=6.0.0",             # ä»£ç æ£€æŸ¥

    # å¼€å‘å·¥å…·
    "ipython>=8.0.0",            # äº¤äº’å¼ Python
    "jupyter>=1.0.0",            # Jupyter Notebook
]
```

### ç”Ÿäº§ä¾èµ– (prod)

```toml
prod = [
    # ç”Ÿäº§ç¯å¢ƒç‰¹å®šä¾èµ–ï¼ˆç›®å‰ä¸ºç©ºï¼‰
]
```

---

## âœ… ä¾èµ–åˆ†æ

### å¿…è¦ä¾èµ– âœ“

1. **pydantic + pydantic-settings** âœ“
   - ç”¨é€”ï¼šé…ç½®ç®¡ç† (`app/core/config.py`)
   - çŠ¶æ€ï¼šæ­£åœ¨ä½¿ç”¨
   - å»ºè®®ï¼šä¿ç•™

2. **python-dotenv** âœ“
   - ç”¨é€”ï¼šåŠ è½½ `.env` æ–‡ä»¶
   - çŠ¶æ€ï¼špydantic-settings ä¾èµ–å®ƒ
   - å»ºè®®ï¼šä¿ç•™

3. **pandas + numpy** âš ï¸
   - ç”¨é€”ï¼šæ•°æ®åˆ†æå’Œå¤„ç†
   - çŠ¶æ€ï¼šå½“å‰æœªä½¿ç”¨ï¼Œä½†é‡åŒ–äº¤æ˜“å¿…éœ€
   - å»ºè®®ï¼šä¿ç•™ï¼ˆåç»­ä¼šç”¨åˆ°ï¼‰

### å¼€å‘ä¾èµ– âœ“

æ‰€æœ‰å¼€å‘ä¾èµ–éƒ½æ˜¯æ ‡å‡†çš„ Python å¼€å‘å·¥å…·ï¼Œå»ºè®®ä¿ç•™ã€‚

---

## ğŸ”„ å·²ç§»é™¤çš„ä¾èµ–

ä»¥ä¸‹ä¾èµ–åœ¨ä¼˜åŒ–æ—¶å·²ç§»é™¤ï¼ˆä¸å†éœ€è¦ï¼‰ï¼š

```toml
# Web æ¡†æ¶ï¼ˆå·²ç§»é™¤ï¼‰
"fastapi>=0.104.1"           # FastAPI æ¡†æ¶
"uvicorn[standard]>=0.24.0"  # ASGI æœåŠ¡å™¨

# æ•°æ®åº“ï¼ˆå·²ç§»é™¤ï¼‰
"sqlalchemy[asyncio]>=2.0.23"    # ORM
"asyncpg>=0.29.0"                # PostgreSQL é©±åŠ¨
"psycopg2-binary>=2.9.0"         # PostgreSQL é©±åŠ¨ï¼ˆå¤‡ç”¨ï¼‰
"alembic>=1.12.0"                # æ•°æ®åº“è¿ç§»

# ç”Ÿäº§ç¯å¢ƒï¼ˆå·²ç§»é™¤ï¼‰
"gunicorn>=21.0.0"               # WSGI æœåŠ¡å™¨
```

---

## ğŸ¯ ä¾èµ–ä½¿ç”¨æƒ…å†µ

### å½“å‰ä»£ç ä¸­çš„ä¾èµ–ä½¿ç”¨

| ä¾èµ– | ä½¿ç”¨ä½ç½® | çŠ¶æ€ |
|------|---------|------|
| pydantic-settings | `app/core/config.py` | âœ… ä½¿ç”¨ä¸­ |
| python-dotenv | ç”± pydantic-settings è°ƒç”¨ | âœ… ä½¿ç”¨ä¸­ |
| pandas | æœªä½¿ç”¨ | âš ï¸ é¢„ç•™ |
| numpy | æœªä½¿ç”¨ | âš ï¸ é¢„ç•™ |
| asyncio | `app/main.py` | âœ… ä½¿ç”¨ä¸­ï¼ˆæ ‡å‡†åº“ï¼‰|
| logging | `app/utils/logger.py` | âœ… ä½¿ç”¨ä¸­ï¼ˆæ ‡å‡†åº“ï¼‰|
| signal | `app/main.py` | âœ… ä½¿ç”¨ä¸­ï¼ˆæ ‡å‡†åº“ï¼‰|
| sys | `app/main.py`, `app/utils/logger.py` | âœ… ä½¿ç”¨ä¸­ï¼ˆæ ‡å‡†åº“ï¼‰|

---

## ğŸ“ å»ºè®®

### 1. å½“å‰ä¾èµ–é…ç½® âœ… åˆç†

å½“å‰çš„ä¾èµ–é…ç½®éå¸¸ç²¾ç®€ï¼Œåªä¿ç•™äº†å¿…è¦çš„åŒ…ï¼š
- âœ… é…ç½®ç®¡ç†ç›¸å…³åŒ…ï¼ˆpydanticï¼‰
- âœ… æ•°æ®å¤„ç†ç›¸å…³åŒ…ï¼ˆpandas, numpyï¼‰
- âœ… å¼€å‘å·¥å…·åŒ…

### 2. å¯é€‰çš„é¢å¤–ä¾èµ–

æ ¹æ®åç»­å¼€å‘éœ€æ±‚ï¼Œå¯èƒ½éœ€è¦æ·»åŠ ï¼š

**æ•°æ®è·å–ï¼š**
```toml
"akshare>=1.11.0"        # Aè‚¡æ•°æ®
"yfinance>=0.2.0"        # Yahoo Finance æ•°æ®
"tushare>=1.3.0"         # Tushare æ•°æ®
```

**æŠ€æœ¯æŒ‡æ ‡ï¼š**
```toml
"ta-lib>=0.4.0"          # æŠ€æœ¯åˆ†æåº“ï¼ˆéœ€è¦ç³»ç»Ÿä¾èµ–ï¼‰
"pandas-ta>=0.3.0"       # Pandas æŠ€æœ¯åˆ†ææ‰©å±•
```

**äº¤æ˜“æ‰§è¡Œï¼š**
```toml
"ccxt>=4.0.0"            # åŠ å¯†è´§å¸äº¤æ˜“æ‰€æ¥å£
```

**æ€§èƒ½ä¼˜åŒ–ï¼š**
```toml
"numba>=0.58.0"          # JIT ç¼–è¯‘åŠ é€Ÿ
```

**æ•°æ®å­˜å‚¨ï¼ˆå¦‚éœ€è¦ï¼‰ï¼š**
```toml
"redis>=5.0.0"           # Redis å®¢æˆ·ç«¯
"pymongo>=4.0.0"         # MongoDB å®¢æˆ·ç«¯
```

### 3. å®‰è£…è¯´æ˜

**åŸºç¡€å®‰è£…ï¼š**
```bash
pip install -e .
```

**å¼€å‘ç¯å¢ƒï¼š**
```bash
pip install -e ".[dev]"
```

**æŒ‡å®šä¾èµ–ç‰ˆæœ¬ï¼š**
```bash
pip install -e . --no-deps
pip install pydantic==2.5.0 pydantic-settings==2.1.0
```

---

## ğŸ”’ ä¾èµ–é”å®š

### å»ºè®®ä½¿ç”¨ pip-tools æˆ– poetry é”å®šä¾èµ–

**ä½¿ç”¨ pip-toolsï¼š**
```bash
# å®‰è£… pip-tools
pip install pip-tools

# ç”Ÿæˆ requirements.txt
pip-compile pyproject.toml

# å®‰è£…é”å®šçš„ä¾èµ–
pip-sync
```

**ä½¿ç”¨ poetryï¼š**
```bash
# åˆå§‹åŒ– poetry
poetry init

# æ·»åŠ ä¾èµ–
poetry add pydantic pydantic-settings pandas numpy python-dotenv

# å®‰è£…
poetry install
```

---

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **Python ç‰ˆæœ¬**ï¼šé¡¹ç›®è¦æ±‚ Python 3.8+
2. **pandas/numpy**ï¼šè™½ç„¶ç›®å‰æœªä½¿ç”¨ï¼Œä½†é‡åŒ–äº¤æ˜“å‡ ä¹å¿…ç„¶éœ€è¦
3. **å¯é€‰ä¾èµ–**ï¼šæ ¹æ®å®é™…éœ€æ±‚æ·»åŠ ï¼Œé¿å…è¿‡åº¦ä¾èµ–
4. **ä¾èµ–æ›´æ–°**ï¼šå®šæœŸæ›´æ–°ä¾èµ–ä»¥è·å–å®‰å…¨è¡¥ä¸

---

## ğŸ“Š ä¾èµ–å¤§å°ä¼°ç®—

å®‰è£…æ‰€æœ‰æ ¸å¿ƒä¾èµ–åçš„å¤§å°çº¦ï¼š
- pydantic + pydantic-settings: ~5 MB
- pandas: ~20 MB
- numpy: ~15 MB
- python-dotenv: <1 MB

**æ€»è®¡çº¦ 40 MB**ï¼ˆä¸å«å¼€å‘ä¾èµ–ï¼‰

---

æœ€åæ›´æ–°ï¼š2025-10-30
